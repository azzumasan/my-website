<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ–Ω–¥–µ—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 20px;
      }

      h1 {
        margin-bottom: 20px;
        color: #151515;
      }

      .search-box {
        margin-bottom: 20px;
        display: flex;
      }

      .search-box input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px 0 0 4px;
        outline: none;
      }

      .search-box button {
        padding: 10px;
        border: 1px solid #078ee6;
        background: #078ee6;
        color: white;
        border-radius: 0 4px 4px 0;
        cursor: pointer;
      }

      .catalog-container {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }

      .catalog-column {
        background: white;
        border-radius: 8px;
        padding: 15px;
        flex: 1;
        min-width: 250px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);

        /* –ù–û–í–û–ï ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã + —Å–∫—Ä–æ–ª–ª */
        max-height: 420px;
        overflow-y: auto;
        scrollbar-width: thin;
      }

      /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è Chrome / Edge / Safari */
      .catalog-column::-webkit-scrollbar {
        width: 6px;
      }

      .catalog-column::-webkit-scrollbar-track {
        background: #e9e9e9;
        border-radius: 10px;
      }

      .catalog-column::-webkit-scrollbar-thumb {
        background: #078ee6;
        border-radius: 10px;
      }

      .catalog-column h2 {
        font-size: 16px;
        margin-bottom: 10px;
        color: #151515;
        position: sticky;
        top: 0;
        background: white;
        padding-bottom: 8px;
      }

      .catalog-column div {
        display: flex;
        justify-content: space-between;
        padding: 8px 10px;
        margin-bottom: 5px;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .catalog-column div:hover {
        background: #f0f0f0;
      }

      .catalog-column div span {
        color: #666666;
      }

      .arrow {
        color: #078ee6;
        font-weight: bold;
      }

      /* –ê–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–¥–∏–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ */
      .catalog-column.active {
        display: block;
      }

      /* –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ (—Å–∫—Ä—ã—Ç—ã–µ) */
      .catalog-column {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>–¢–µ–Ω–¥–µ—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h1>
    <div class="search-box">
      <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞" />
      <button>üîç</button>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫ -->
    <div class="catalog-container" id="catalogContainer">
      <!-- –ö–æ–ª–æ–Ω–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JS -->
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è -->
    <div id="itemList" class="item-list" style="display: none">
      <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
    </div>

    <script>
      // ----------------------------
      // –ó–∞–≥—Ä—É–∂–∞–µ–º JSON —Å –¥–∞–Ω–Ω—ã–º–∏
      // ----------------------------
      fetch("catalog.json")
        .then((res) => res.json())
        .then((data) => buildCatalog(data))
        .catch((err) => console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ JSON:", err));

      function buildCatalog(data) {
        const container = document.getElementById("catalogContainer");
        const itemList = document.getElementById("itemList");

        // ----------------------------
        // –ü–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
        // ----------------------------
        const level1 = document.createElement("div");
        level1.classList.add("catalog-column", "active");
        level1.id = "level1";
        level1.innerHTML = "<h2>–¢–µ–Ω–¥–µ—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>";

        for (let category in data) {
          const div = document.createElement("div");
          div.textContent = category;
          div.dataset.category = category;
          div.classList.add("level1-item");
          div.innerHTML += ' <span class="arrow">‚Ä∫</span>';
          level1.appendChild(div);
        }

        container.appendChild(level1);

        // ----------------------------
        // –ö–ª–∏–∫ –ø–æ –ø–µ—Ä–≤–æ–º—É —É—Ä–æ–≤–Ω—é
        // ----------------------------
        level1.addEventListener("click", (e) => {
          if (!e.target.classList.contains("level1-item")) return;
          const catName = e.target.dataset.category;

          // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É—Ä–æ–≤–Ω–∏ 2-4
          document
            .querySelectorAll(".level2, .level3")
            .forEach((el) => el.remove());
          itemList.style.display = "none";

          // –°–æ–∑–¥–∞–µ–º –≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å
          const level2 = document.createElement("div");
          level2.classList.add("catalog-column", "level2", "active");
          level2.innerHTML = `<h2>${catName}</h2>`;

          const subcats = data[catName]; // –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–±—ä–µ–∫—Ç)

          for (let subcat in subcats) {
            const div = document.createElement("div");
            div.textContent = subcat;
            div.dataset.subcategory = subcat;
            div.dataset.parent = catName;
            div.classList.add("level2-item");
            div.innerHTML += ' <span class="arrow">‚Ä∫</span>';
            level2.appendChild(div);
          }

          container.appendChild(level2);
        });

        // ----------------------------
        // –ö–ª–∏–∫ –ø–æ –≤—Ç–æ—Ä–æ–º—É —É—Ä–æ–≤–Ω—é
        // ----------------------------
        container.addEventListener("click", (e) => {
          if (!e.target.classList.contains("level2-item")) return;
          const parent = e.target.dataset.parent;
          const subcat = e.target.dataset.subcategory;

          // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å –∏ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
          document.querySelectorAll(".level3").forEach((el) => el.remove());
          itemList.style.display = "none";

          // –°–æ–∑–¥–∞–µ–º —Ç—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å
          const level3 = document.createElement("div");
          level3.classList.add("catalog-column", "level3", "active");
          level3.innerHTML = `<h2>${subcat}</h2>`;

          const groups = data[parent][subcat]; // —Ç—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å: –≥—Ä—É–ø–ø—ã –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
          for (let groupName in groups) {
            const div = document.createElement("div");
            div.textContent = groupName;
            div.dataset.group = groupName;
            div.dataset.subcategory = subcat;
            div.dataset.parent = parent;
            div.classList.add("level3-item");
            div.innerHTML += ' <span class="arrow">‚Ä∫</span>';
            level3.appendChild(div);
          }

          container.appendChild(level3);
        });

        // ----------------------------
        // –ö–ª–∏–∫ –ø–æ —Ç—Ä–µ—Ç—å–µ–º—É —É—Ä–æ–≤–Ω—é (–ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤)
        // ----------------------------
        container.addEventListener("click", (e) => {
          if (!e.target.classList.contains("level3-item")) return;
          const parent = e.target.dataset.parent;
          const subcat = e.target.dataset.subcategory;
          const group = e.target.dataset.group;

          // –ë–µ—Ä–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è
          const items = data[parent][subcat][group]; // –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫

          if (!items) return;

          // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ø–∏—Å–æ–∫
          itemList.innerHTML = `<h2>${parent} - ${subcat} - ${group}</h2>`;
          const ul = document.createElement("ul");
          items.forEach((item) => {
            const li = document.createElement("li");
            li.textContent = item;
            ul.appendChild(li);
          });
          itemList.appendChild(ul);
          itemList.style.display = "block"; // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫
          itemList.scrollIntoView({ behavior: "smooth" }); // –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Å–ø–∏—Å–∫—É
        });
      }
    </script>
  </body>
</html>
